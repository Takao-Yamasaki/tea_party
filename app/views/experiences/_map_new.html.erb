<p><div id='map'></div></p>

<style>
  #map {
    height: 400px;
  }
</style>

<script>

let map

function initMap() {
  geocoder = new google.maps.Geocoder()

  map = new google.maps.Map(document.getElementById('map'), {
    center: {
        lat: 32.8032459,
        lng: 130.7079996
    },
    zoom: 15
  });
}
let geocorder
function codeAddress() {
  let inputAddress = document.getElementById('address').value;

  geocoder.geocode({
    'address': inputAddress
  }, function (results, status) {
    if (status == 'OK') {              
      map.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
      });
    
    document.getElementById('latitude').value = results[0].geometry.location.lat();
    document.getElementById('longitude').value = results[0].geometry.location.lng();

    } else {
      alert('該当する結果がありませんでした：' + status);
    }
  });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLEMAP'] %>&callback=initMap" async defer></script>
